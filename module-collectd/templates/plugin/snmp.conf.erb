<% if @data or @hosts -%>
<Plugin snmp>
<% @data.sort_by {|k,v| k}.each do |key,val| -%>
  <Data "<%=key %>">
    Type "<%= val['Type'] %>"
<% if val['Table'] -%>
    Table <%= val['Table'] %>
<% end -%>
    Instance "<%= val['Instance'] %>"
<% if val['InstancePrefix'] -%>
    InstancePrefix "<%= val['InstancePrefix'] %>"
<% end -%>
    Values <% Array(val['Values']).each do |x| -%>"<%= x %>" <% end %>
<% if val['Scale'] -%>
    Scale <%= val['Scale'] %>
<% end -%>
<% if val['Shift'] -%>
    Shift <%= val['Shift'] %>
<% end -%>
  </Data>
<% end -%>
<% @hosts.sort_by {|k,v| k}.each do |key,val| -%>
  <Host "<%=key %>">
    Address "<%= val['Address'] %>"
    Version <%= val['Version'] %>
    Community "<%= val['Community'] %>"
    Collect <% Array(val['Collect']).sort.each do |x| -%>"<%= x -%>" <% end %>
    Interval <%= val['Interval'] %>
  </Host>
<% end -%>
</Plugin>
<% end -%>
